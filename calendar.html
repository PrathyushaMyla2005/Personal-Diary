<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personal Diary - Calendar</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Roboto', sans-serif; }
    body { display:flex; min-height:100vh; background: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1470&q=80') no-repeat center center fixed; background-size: cover; }

    .sidebar {
      width:220px; background: rgba(0,0,0,0.8); color:#fff; display:flex; flex-direction:column; padding:20px;
      position: fixed; left:-220px; top:0; height:100%; transition: left 0.3s ease; z-index:200;
    }
    .sidebar.show { left:0; }
    .sidebar h2 { text-align:center; margin-bottom:30px; font-size:1.5rem; }
    .sidebar a { text-decoration:none; color:#fff; padding:10px; margin:5px 0; border-radius:8px; transition: background 0.3s; }
    .sidebar a:hover { background: rgba(255,255,255,0.2); }

    .overlay {
      position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); display:none; z-index:100;
    }

    .main-content { flex:1; margin-left:0; padding:30px; overflow-y:auto; background: rgba(255,255,255,0.9); transition: margin-left 0.3s ease; }

    .header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .header h1 { font-size:2rem; color:#333; }
    .header button { padding:8px 16px; border:none; background:#333; color:#fff; border-radius:6px; cursor:pointer; }
    .header button:hover { background:#555; }
    .toggle-btn {
  display: block;
  font-size: 1.5rem;
  background: none;
  border: none;
  cursor: pointer;
  margin-right: 15px;
  z-index: 300;      /* Make sure it's above sidebar */
  position: relative; /* Keep it in normal flow but above sidebar */
}

    .calendar-container { max-width:800px; margin:0 auto; }
    .calendar-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .calendar-header button { padding:5px 10px; }
    .calendar-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:5px; }
    .calendar-day { padding:15px; background:#f8f8f8; border-radius:6px; text-align:center; position:relative; }
    .calendar-day.mood { font-size:1.2rem; }
    .calendar-day.today { border:2px solid #333; }
    .day-name { font-weight:bold; text-align:center; }

    @media(max-width:768px){
      .main-content { padding:15px; }
      .calendar-day { padding:10px; font-size:0.9rem; }
      .header h1 { font-size:1.5rem; }
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <h2>My Diary</h2>
    <a href="index.html">üè† Home</a>
    <a href="dashboard.html">üìä Dashboard</a>
    <a href="diary.html?mode=write">‚úèÔ∏è Write Entry</a>
    <a href="diary.html?mode=view">üìñ View Entries</a>
    <a href="calendar.html">üìÖ Calendar</a>
    <a href="#">üòä Mood Tracking</a>
    <a href="profile.html">üë§ Profile</a>
     <a href="#">üíæ Export / Backup</a>
  </div>

  <!-- Overlay -->
  <div class="overlay" id="overlay"></div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="header">
      <button class="toggle-btn" id="toggle-btn">‚ò∞</button>
      <h1>Calendar View</h1>
      <button onclick="logout()">Logout</button>
    </div>

    <div class="calendar-container">
      <div class="calendar-header">
        <button onclick="prevMonth()">&#8592;</button>
        <h2 id="month-year">August 2025</h2>
        <button onclick="nextMonth()">&#8594;</button>
      </div>
      <div class="calendar-grid" id="calendar-grid"></div>
    </div>
  </div>

  <script>
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const toggleBtn = document.getElementById('toggle-btn');

    // Open/Close sidebar
    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('show');
      overlay.style.display = sidebar.classList.contains('show') ? 'block' : 'none';
    });

    // Click overlay to close sidebar
    overlay.addEventListener('click', () => {
      sidebar.classList.remove('show');
      overlay.style.display = 'none';
    });

    // Close sidebar when any link clicked
    document.querySelectorAll('.sidebar a').forEach(link => {
      link.addEventListener('click', () => {
        sidebar.classList.remove('show');
        overlay.style.display = 'none';
      });
    });

    function logout() {
      alert("Logging out...");
      window.location.href = 'login.html';
    }

    // Calendar JS
    const calendarGrid = document.getElementById('calendar-grid');
    const monthYear = document.getElementById('month-year');
    let currentDate = new Date();

    const sampleEntries = {
      '2025-08-16': 'üòä',
      '2025-08-15': 'üòå',
      '2025-08-10': 'üò¢',
      '2025-08-01': 'üò°'
    };

    function renderCalendar() {
      calendarGrid.innerHTML = '';
      const dayNames = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
      dayNames.forEach(name => {
        const div = document.createElement('div');
        div.classList.add('day-name');
        div.textContent = name;
        calendarGrid.appendChild(div);
      });

      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const lastDate = new Date(year, month+1, 0).getDate();

      monthYear.textContent = currentDate.toLocaleString('default', {month:'long', year:'numeric'});

      for(let i=0;i<firstDay;i++){
        const empty = document.createElement('div');
        calendarGrid.appendChild(empty);
      }

      for(let d=1; d<=lastDate; d++){
        const dayDiv = document.createElement('div');
        dayDiv.classList.add('calendar-day');
        const fullDate = `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
        dayDiv.textContent = d;
        if(sampleEntries[fullDate]){
          const moodSpan = document.createElement('div');
          moodSpan.classList.add('mood');
          moodSpan.textContent = sampleEntries[fullDate];
          dayDiv.appendChild(moodSpan);
        }
        if(d === new Date().getDate() && month === new Date().getMonth() && year === new Date().getFullYear()){
          dayDiv.classList.add('today');
        }
        calendarGrid.appendChild(dayDiv);
      }
    }

    function prevMonth() { currentDate.setMonth(currentDate.getMonth()-1); renderCalendar(); }
    function nextMonth() { currentDate.setMonth(currentDate.getMonth()+1); renderCalendar(); }

    renderCalendar();
  </script>
</body>
</html>
